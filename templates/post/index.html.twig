{% extends 'clean.html.twig' %}

{% block title %}
	Homepage
{% endblock %}

{% block content %}
	<!-- Page Header-->
	<header class="masthead" style="background-image: url('{{ asset('clean/assets/img/home-bg.jpg') }}')">
		{% for message in app.flashes('success') %}
			<div class="alert alert-success container" role="alert">{{ message }}</div>
		{% endfor %}
		<div class="container position-relative px-4 px-lg-5">
			<div class="row gx-4 gx-lg-5 justify-content-center">
				<div class="col-md-10 col-lg-8 col-xl-7">
					<div class="site-heading">
						<h1>Clean Blog</h1>
						<span class="subheading">A Blog Theme by Start Bootstrap</span>
					</div>
				</div>
			</div>
		</div>
	</header>
	<!-- Main Content-->
	<div class="container px-4 px-lg-5">
		<div class="row gx-4 gx-lg-5 justify-content-center">
			<div class="col-md-10 col-lg-8 col-xl-7">
				{% for post in posts %}
					<div class="p-3">
						<div class="flex">
							{% if app.user %}
								<a class="flex w-fit" href="{{ path('like_post', {id: post.id}) }}" data-action="like" data-nb={{ post.likes|length }}>
								{% endif %}

								<svg width="40px" class="h6 w-6 filled {{ app.user in post.likes ? '' : 'd-none' }}" viewbox="0 0 91 91" enable-background="new 0 0 91 91" id="Layer_1" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000">
									<g id="SVGRepo_bgCarrier" stroke-width="0"/>
									<g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/>
									<g id="SVGRepo_iconCarrier">
										<g>
											<path d="M79.922,12.894c-4.057-3.35-9.26-5.193-14.652-5.193c-6.238,0-12.271,2.48-16.557,6.807 c-0.996,1.006-1.91,2.113-2.756,3.34C41.578,11.5,34.507,7.664,26.889,7.664c-1.398,0-2.814,0.127-4.209,0.383 C15.471,9.357,9.805,13.324,5.838,19.83c-5.68,9.326-6.131,17.939-1.381,26.33c2.545,4.494,5.859,8.891,10.137,13.441 c7.865,8.359,17.176,16.295,29.31,24.979c0.648,0.459,1.336,0.691,2.045,0.691c1.096,0,1.836-0.555,2.262-0.875 c10.781-7.693,19.631-15.107,27.055-22.67c4.172-4.256,8.904-9.482,12.361-15.984c1.453-2.736,3.107-6.412,3.012-10.564 C90.422,26.087,86.816,18.591,79.922,12.894z" fill="#f91880"/>
										</g>
									</g>
								</svg>

								<svg width="40px" class="h-6 w-6 unfilled {{ app.user in post.likes ? 'd-none' : '' }}" viewbox="0 0 91 91" enable-background="new 0 0 91 91" id="Layer_1" version="1.1" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
									<g>
										<path d="M79.922,12.894c-4.057-3.35-9.26-5.193-14.652-5.193c-6.238,0-12.271,2.48-16.557,6.807   c-0.996,1.006-1.91,2.113-2.756,3.34C41.578,11.5,34.507,7.664,26.889,7.664c-1.398,0-2.814,0.127-4.209,0.383   C15.471,9.357,9.805,13.324,5.838,19.83c-5.68,9.326-6.131,17.939-1.381,26.33c2.545,4.494,5.859,8.891,10.137,13.441   c7.865,8.359,17.176,16.295,29.31,24.979c0.648,0.459,1.336,0.691,2.045,0.691c1.096,0,1.836-0.555,2.262-0.875   c10.781-7.693,19.631-15.107,27.055-22.67c4.172-4.256,8.904-9.482,12.361-15.984c1.453-2.736,3.107-6.412,3.012-10.564   C90.422,26.087,86.816,18.591,79.922,12.894z" fill="#647F94"/>
									</g>
								</svg>
								<span class="ml-2">{{ post.likes|length }}
									J'aime</span>
								{% if app.user %}
								</a>
							{% endif %}
						</div>
					</div>

					<div class="post-preview">
						<a href="{{ path('post_view', {slug: post.slug}) }}">
							<h2 class="post-title">{{ post.title }}</h2>
							<img src="{{ post.image }}" alt="Image de l'article {{ post.title }}" style="width:100%">
							<h3 class="post-subtitle">{{ post.content | u.truncate(24, '...') | raw }}</h3>
						</a>
						<p class="post-meta">Ecrit par
							{{ post.user.email }}
							- le
							{{ post.createdAt | date('d/m/Y à H:i') }}
							- Classé dans{{ post.category.name }}
						</p>
					</div>
					{% if not loop.last %}
						<hr>
					{% endif %}
				{% endfor %}

				<!-- Pager-->
				<div class="d-flex justify-content-center mb-4">
					{{ knp_pagination_render(posts) }}
				</div>
			</div>
		</div>
	</div>
{% endblock %}
